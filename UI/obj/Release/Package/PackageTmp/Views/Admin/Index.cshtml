
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Admin.cshtml";
}


<style>
    .red2 {
        background-color: darkgray;
    }
</style>


<body class="w3-light-grey">

    <div class="w3-main" @*style="margin-left:300px;margin-top:43px;"*@>

        <!-- Header -->
        <header class="w3-container" style="padding-top:22px">
            <h5><b><i class="fa fa-dashboard"></i>Admin Panal</b></h5>
        </header>

        <div class="w3-row-padding w3-margin-bottom">
            <div class="w3-quarter">
                <div class="w3-container w3-red w3-padding-16">
                    <div class="w3-left"><i class="fa fa-comment w3-xxxlarge"></i></div>
                    <div class="w3-right">
                        <h3 id="compoling"></h3>
                    </div>
                    <div class="w3-clear"></div>
                    <h4>Complaits</h4>
                </div>

            </div>
            <div class="w3-quarter">
                <div class="w3-container w3-blue w3-padding-16">
                    <div class="w3-left"><i class="fa fa-eye w3-xxxlarge"></i></div>
                    <div class="w3-right">
                        <h3 id="view"></h3>
                    </div>
                    <div class="w3-clear"></div>
                    <h4>Views</h4>
                </div>
            </div>
            <div class="w3-quarter">
                <div class="w3-container w3-teal w3-padding-16">
                    <div class="w3-left"><i class="fa fa-users w3-xxxlarge"></i></div>
                    <div class="w3-right">
                        <h3 id="Empolyee"></h3>
                    </div>
                    <div class="w3-clear"></div>
                    <h4>Empolyee</h4>
                </div>
            </div>
            <div class="w3-quarter">
                <div class="w3-container w3-orange w3-text-white w3-padding-16">
                    <div class="w3-left"><i class="fa fa-users w3-xxxlarge"></i></div>
                    <div class="w3-right">
                        <h3 id="Customer"></h3>
                    </div>
                    <div class="w3-clear"></div>
                    <h4>Customer</h4>
                </div>
            </div>

            <div class="w3-quarter" style="margin-top: 20px;">
                <div class="w3-container w3-red w3-padding-16">
                    <div class="w3-left"><i class="fa fa-home w3-xxxlarge"></i></div>
                    <div class="w3-right">
                        <h3 id="AllRoom"></h3>
                    </div>
                    <div class="w3-clear"></div>
                    <h4>
                        
                        All Room
                    </h4>
                </div>
            </div>
            <div class="w3-quarter" style="margin-top: 20px;">
                <div class="w3-container w3-blue w3-padding-16">
                    <div class="w3-left"><i class="fa fa-home w3-xxxlarge"></i></div>
                    <div class="w3-right">
                        <h3 id="AvailableRoom"></h3>

                    </div>
                    <div class="w3-clear"></div>
                    <h4>Available Room</h4>
                </div>
            </div>

        </div>

      
        <hr>
        <div class="w3-container">
            <h5>General Stats</h5>
            <p>Available Room</p>
            <div class="w3-grey">
                <div class="w3-container w3-center w3-padding w3-green" id="RoomPresent"></div>
            </div>

            <p>New Users</p>
            <div class="w3-grey">
                <div class="w3-container w3-center w3-padding w3-orange" style="width:50%">50%</div>
            </div>

            <p>Bounce Rate</p>
            <div class="w3-grey">
                <div class="w3-container w3-center w3-padding w3-red" style="width:75%">75%</div>
            </div>
        </div>
        <hr>



        <!-- End page content -->
    </div>

    <input id="1" type="hidden" value="" />

</body>
<table class="table-responsive" style="display:none">
    <thead>
        <tr>
            <th>id</th>
            <th>Enddate</th>
        </tr>
    </thead>

    <tbody class="h">
        <tr></tr>
    </tbody>
</table>



<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script>
    $(document).ready(function () {
        GetfreyroomNumber();
        GetCustomername();
        
        GetCustomerNumber();
        GetComplaitsNumber();

        vister();
        GetAllEmpoiyeeNumber();
       
        GetAllRoomNumber();
    });
    function vister() {
        $.ajax({
            url: "/Admin/vistercount",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#view").html(A);

            }

        });
    }
    function GetCustomerNumber() {
        $.ajax({
            url: "/Admin/CustomerNumber",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#Customer").html(A);

            }

        });
    }
    function GetAllEmpoiyeeNumbr() {
        $.ajax({
            url: "/Admin/AllEmpoiyeeNumber",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#Empolyee").html(A);

            }

        });
    }
    function GetAllEmpoiyeeNumber() {
        $.ajax({
            url: "/Admin/AllEmpoiyeeNumber",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#Empolyee").html(A);

            }

        });
    }
    function GetComplaitsNumber() {
        $.ajax({
            url: "/Admin/ComplaitsNumber",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#compoling").html(A);

            }

        });
    }


    function GetAllRoomNumber() {
        $.ajax({
            url: "/Admin/AllRoomNumber",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#AllRoom").html(A);
                var a = $("#1").val();
                
                var x = a / A * 100;
               
                $("#RoomPresent").css("width", x + '%').html(x + "%");


            }

        });
    }
    function GetfreyroomNumber() {
        $.ajax({
            url: "/Admin/AvailableRoom",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (A) {
                $("#AvailableRoom").html(A);
                $("#1").val(A);
            }

        });
    }
    function GetCustomername() {
        $.ajax({
            url: "/Customer/getCustomerRoom",
            type: "Get",
            contenttype: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
                var html = '';
                $.each(result, function (key, item) {
                    html += '<tr >';
                    html += '<td>' + item.id + '</td>';
                    html += '<td>' + item.EndData + '</td>';


                    html += '</tr>';
                });
                $('.h').html(html);
                Seck();
            }

        });
    }
    function Seck() {
        var today = new Date();
        if (today.getMonth() + 1 < 10 && today.getDate() < 10) {

            var date = today.getFullYear() + '-' + '0' + (today.getMonth() + 1) + '-' + '0' + today.getDate();
        } else if (today.getMonth() + 1 < 10 && today.getDate() > 10) {
            var date = today.getFullYear() + '-' + '0' + (today.getMonth() + 1) + '-' + today.getDate();

        } else if (today.getMonth() + 1 > 10 && today.getDate() < 10) {
            var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + '0' + today.getDate();

        } else {
            var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();

        }
        //var dateTime = date;
        $('.h tr').each(function () {
            var x = $(this)
            var end = x.find("td:eq(1)").html();
            var RoomIdfk = x.find("td:eq(0)").html();
            if (date == end) {
                alert(date == end)

                $.ajax({
                    url: "/customer/Delet?id=" + RoomIdfk,
                    type: "GET",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    success: function (result) {


                    }

                });
            }

        });

    }
</script>
